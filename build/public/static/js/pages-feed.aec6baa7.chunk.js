(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[5],{"3gGZ":function(e,t,n){"use strict";var r=n("QILm"),a=n.n(r),c=n("q1tI"),o=n.n(c),i=n("JvQS"),l=n("KIry");t.a=function(e){var t=e.children,n=a()(e,["children"]);return o.a.createElement(i.Query,n,(function(e){var n=e.loading,r=e.error,a=e.data,c=e.fetchMore,i=e.client;return r?"Error!: ".concat(r):a?t({data:a,loading:n,fetchMore:c,client:i}):o.a.createElement(l.a,null)}))}},T7qA:function(e,t,n){"use strict";var r=n("J4zp"),a=n.n(r),c=n("q1tI"),o=n.n(c),i=n("55Ip"),l=n("P5cT"),s=n("o0o1"),u=n.n(s),m=n("yXPU"),f=n.n(m),d=n("VX74"),v=n("0W7o"),p=n("6yQF"),b=n("Rim+"),E=n("Kc7+"),h=n("0bUS"),y=n("bvWH"),g=function(e){var t=e.id,n=e.likers,r=e.isShowCount,i=Object(E.b)(),l=Object(E.c)().id,s=Object(d.useMutation)(p.b),m=a()(s,1)[0],g=Object(d.useMutation)(p.c),_=a()(g,1)[0],O=Object(c.useState)(!1),k=a()(O,2),w=k[0],j=k[1],S=Object(c.useState)(n.length),N=a()(S,2),q=N[0],$=N[1],A=Object(c.useCallback)(f()(u.a.mark((function e(){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==Object(h.c)(h.a)){e.next=3;break}return e.abrupt("return",i({type:y.g}));case 3:if(e.prev=3,!w){e.next=11;break}return e.next=7,_({variables:{id:t}});case 7:n=!1,r=q-1,e.next=15;break;case 11:return e.next=13,m({variables:{id:t}});case 13:n=!0,r=q+1;case 15:j(n),$(r),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),Object(b.a)({error:e.t0,dispatch:i});case 22:case"end":return e.stop()}}),e,null,[[3,19]])}))),[w,q]);return Object(c.useEffect)((function(){j(n.some((function(e){return e.id==l})))}),[l]),o.a.createElement("div",{className:"fr-like"},o.a.createElement("button",{onClick:A,"aria-label":"\uc88b\uc544\uc694"},o.a.createElement("span",{tabIndex:"-1"},w?o.a.createElement(v.d,null):o.a.createElement(v.c,null)),o.a.createElement("span",{className:"a11y-hidden"},w?"\uc88b\uc544\uc694 \ucde8\uc18c\ud558\uae30":"\uc88b\uc544\uc694 \ud558\uae30")),o.a.createElement("div",{className:"fr-like__count"},r&&o.a.createElement("span",null,q.toLocaleString())))},_=n("fFwQ"),O=n("jkUL"),k=n.n(O),w=function(e){var t=e.id,n=e.User,r=e.createdAt,s=e.category,u=e.content,m=e.Likers,f=Object(c.useRef)(null),d=Object(c.useState)(!0),v=a()(d,2),p=v[0],b=v[1];return Object(c.useEffect)((function(){var e=f.current.querySelectorAll("img");0===e.length&&b(!1),e.forEach((function(t,n){var r=new Image;r.src=t.src,r.onload=function(){var r=this.width,a=this.height,c=t.parentNode;c.classList.add("fr-thumbnail"),c.style.paddingBottom="calc(".concat(a/r," * 100%)"),t.classList.add("fr-thumbnail__image"),n===e.length-1&&b(!1)}}))}),[]),o.a.createElement("div",{className:"".concat("fr-post","__wrapper")},o.a.createElement("article",{className:"fr-post"},o.a.createElement("header",{className:"".concat("fr-post","__header")},o.a.createElement("div",{className:"".concat("fr-post","__avatar"),"aria-label":"avatar"},o.a.createElement(l.a,{src:n.avatar,size:38,userId:n.id})),o.a.createElement("div",{className:"".concat("fr-post","__user")},o.a.createElement("span",{className:"".concat("fr-post","__username")},n.nickname))),o.a.createElement("div",{className:"".concat("fr-post","__body ").concat("fr-post","__body--expended")},p&&o.a.createElement("div",{className:"".concat("fr-post","__skeleton")},o.a.createElement(k.a,{type:"ThreeDots",color:"#4142DD",height:80,width:80,visible:!0})),o.a.createElement("div",{ref:f,className:"markdown-body",dangerouslySetInnerHTML:{__html:u?Object(_.marked)(u):""}})),o.a.createElement("footer",{className:"".concat("fr-post","__footer")},s&&o.a.createElement("div",{className:"".concat("fr-post","__tag")},o.a.createElement(i.b,{to:"/category/".concat(s)},"#",s)),o.a.createElement("div",{className:"".concat("fr-post","__more")},o.a.createElement("div",null,o.a.createElement(g,{id:t,likers:m,isShowCount:!0})),o.a.createElement("div",null,function(e){var t=new Date,n=new Date(e),r=Math.floor((t.getTime()-n.getTime())/1e3/60);if(r<1)return"\ubc29\uae08 \uc804";if(r<60)return"".concat(r,"\ubd84 \uc804");var a=Math.floor(r/60);if(a<24)return"".concat(a,"\uc2dc\uac04 \uc804");var c=Math.floor(r/60/24);if(c<31)return"".concat(c,"\uc77c \uc804");var o=Math.floor(r/60/24/7);if(o<5)return"".concat(o,"\uc8fc \uc804");var i=Math.floor(r/60/24/7/12);return i<13?"".concat(i,"\uac1c\uc6d4 \uc804"):"".concat(Math.floor(c/365),"\ub144 \uc804")}(r))))))};t.a=Object(c.memo)(w)},ULaD:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),c=n("qhky");t.a=function(e){var t=e.title,n=e.description;return a.a.createElement(c.a,null,a.a.createElement("title",null,t||"Frisklog"),a.a.createElement("meta",{name:"description",content:n||"Blog made by frisk"}),a.a.createElement("meta",{name:"twitter:title",content:t||"Frisklog"}),a.a.createElement("meta",{name:"twitter:description",content:n||"Blog made by frisk"}),a.a.createElement("meta",{name:"twitter:image:alt",content:"frisklog"}))}},XRCk:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var r=n("VkAN"),a=n.n(r),c=n("VX74");function o(){var e=a()(["\n    query Me {\n        me {\n            id\n            nickname\n            email\n            avatar\n            isMaster\n            Posts {\n                id\n            }\n            createdAt\n            updatedAt\n        }\n    }\n"]);return o=function(){return e},e}function i(){var e=a()(["\n    query GetUser($id: String!) {\n        user(id: $id) {\n            id\n            nickname\n            email\n            avatar\n            isMaster\n            Posts {\n                id\n            }\n            createdAt\n            updatedAt\n        }\n    }\n"]);return i=function(){return e},e}function l(){var e=a()(["\n    query GetRecommenders($offset: Int, $limit: Int!) {\n        recommenders(offset: $offset, limit: $limit) {\n            id\n            nickname\n            avatar\n            PostCount\n        }\n    }\n"]);return l=function(){return e},e}function s(){var e=a()(["\n    query GetUsers($offset: Int, $limit: Int!, $order: String) {\n        users(offset: $offset, limit: $limit, order: $order) {\n            rows {\n                id\n                nickname\n                email\n                avatar\n                isMaster\n                Posts {\n                    id\n                }\n                createdAt\n                updatedAt\n            }\n            count\n        }\n    }\n"]);return s=function(){return e},e}Object(c.gql)(s());var u=Object(c.gql)(l()),m=Object(c.gql)(i());Object(c.gql)(o())},gzFH:function(e,t,n){"use strict";var r=n("lSNA"),a=n.n(r),c=n("pVnL"),o=n.n(c),i=n("q1tI"),l=n.n(i),s=n("3gGZ"),u=n("lwsE"),m=n.n(u),f=n("W8MJ"),d=n.n(f),v=n("PJYZ"),p=n.n(v),b=n("7W2i"),E=n.n(b),h=n("a1gu"),y=n.n(h),g=n("Nsbk"),_=n.n(g);function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y()(this,n)}}var k=function(e){E()(n,e);var t=O(n);function n(){var e;m()(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return e=t.call.apply(t,[this].concat(c)),a()(p()(e),"handleScroll",(function(){var t=e.props.onBottom,n=document.querySelector("#main"),r=n.scrollHeight,a=n.clientHeight;n.scrollTop+a>r-600&&(e.disabledEvent(),t(e.activeEvent))})),a()(p()(e),"activeEvent",(function(){document.querySelector("#main").addEventListener("scroll",e.handleScroll)})),a()(p()(e),"disabledEvent",(function(){document.querySelector("#main").removeEventListener("scroll",e.handleScroll)})),e}return d()(n,[{key:"componentDidMount",value:function(){this.activeEvent()}},{key:"componentWillUnmount",value:function(){this.disabledEvent()}},{key:"render",value:function(){return null}}]),n}(i.Component),w=n("RIqP"),j=n.n(w),S=function(e){var t=e.fetchMore,n=e.variables,r=e.type;return function(e){return t({variables:n,updateQuery:function(t,n){var c=n.fetchMoreResult;return c&&0!==c[r].rows.length?(e(),a()({},r,{rows:[].concat(j()(t[r].rows),j()(c[r].rows)),count:t[r].count})):t}})}};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=e.type,n=e.query,r=e.variables,a=e.fetchMoreType,c=e.Item;return l.a.createElement(s.a,{query:n,variables:r},(function(e){var n=e.data,i=e.fetchMore,s=n[t],u=s.rows,m=s.count,f=u.length;return 0===f?"no data":l.a.createElement(l.a.Fragment,null,u.map((function(e){return l.a.createElement(c,o()({key:t+e.id},e))})),f<m&&("scroll"===a&&l.a.createElement(k,{onBottom:S({fetchMore:i,variables:q(q({},r),{},{offset:f}),type:t})})||"button"===a&&null))}))}},pcKP:function(e,t,n){"use strict";n.r(t);var r=n("pVnL"),a=n.n(r),c=n("q1tI"),o=n.n(c),i=n("ULaD"),l=n("3gGZ"),s=n("XRCk"),u=n("xO0O"),m=n("T7qA"),f=n("OS56"),d=n.n(f),v=n("Kc7+"),p=n("0W7o"),b=function(e){var t=e.onClick;return o.a.createElement("button",{className:"fr-carousel__prev",onClick:t},o.a.createElement(p.b,null))},E=function(e){var t=e.onClick;return o.a.createElement("button",{className:"fr-carousel__next",onClick:t},o.a.createElement(p.b,null))},h=function(e){var t=e.children,n={className:"fr-carousel",infinite:!0,speed:500,slidesToShow:Object(v.c)().slidesToShow,centerMode:!0,prevArrow:o.a.createElement(b,null),nextArrow:o.a.createElement(E,null),autoplay:!0,autoplaySpeed:5e3};return o.a.createElement(d.a,n,t)},y=n("P5cT"),g=function(e){var t=e.id,n=e.nickname,r=e.avatar,a=e.PostCount;return o.a.createElement("div",{className:"fr-usercard"},o.a.createElement("div",{className:"".concat("fr-usercard","__header")},o.a.createElement("span",{className:"fr-avatar__name"},n),o.a.createElement("span",null,a," Posts")),o.a.createElement("div",{className:"".concat("fr-usercard","__body")},o.a.createElement(y.a,{userId:t,size:120,src:r})))},_=n("gzFH");t.default=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,null),o.a.createElement(l.a,{query:s.a,variables:{limit:10}},(function(e){var t=e.data.recommenders;return 0===t.length?null:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"fr-main__title"},o.a.createElement("span",null,"\ucd94\ucc9c\uc778")),o.a.createElement(h,null,t.map((function(e){return o.a.createElement(g,a()({key:"user".concat(e.id)},e))}))),o.a.createElement("br",null))})),o.a.createElement("div",{className:"fr-main__title activeEscape"},o.a.createElement("span",null,"\ucd5c\uadfc \uac8c\uc2dc\ubb3c")),o.a.createElement(_.a,{type:"posts",query:u.a,variables:{limit:12,order:"createdAt_DESC"},fetchMoreType:"scroll",Item:m.a}))}},xO0O:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("VkAN"),a=n.n(r),c=n("VX74");function o(){var e=a()(["\n    query GetPost($id: String!) {\n        post(id: $id) {\n            id\n            # title\n            # description\n            content\n            # viewCount\n            category\n            # thumbnail\n            User {\n                id\n                nickname\n                avatar\n            }\n            Likers {\n                id\n            }\n            createdAt\n            updatedAt\n        }\n    }\n"]);return o=function(){return e},e}function i(){var e=a()(["\n    query GetPosts(\n        $offset: Int\n        $limit: Int!\n        $order: String\n        $searchKeyword: String\n        $category: String\n        $userId: String\n    ) # $isThereThumb: Boolean\n    {\n        posts(\n            offset: $offset\n            limit: $limit\n            order: $order\n            searchKeyword: $searchKeyword\n            category: $category\n            userId: $userId\n        ) # isThereThumb: $isThereThumb\n        {\n            rows {\n                id\n                # title\n                # description\n                content\n                # viewCount\n                category\n                # thumbnail\n                User {\n                    id\n                    nickname\n                    avatar\n                }\n                Likers {\n                    id\n                }\n                createdAt\n                updatedAt\n            }\n            count\n        }\n    }\n"]);return i=function(){return e},e}var l=Object(c.gql)(i());Object(c.gql)(o())}}]);
//# sourceMappingURL=pages-feed.aec6baa7.chunk.js.map