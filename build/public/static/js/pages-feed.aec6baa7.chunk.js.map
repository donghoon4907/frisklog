{"version":3,"sources":["webpack:///./src/components/Query.jsx","webpack:///./src/components/PostLike.jsx","webpack:///./src/components/PostItem.jsx","webpack:///./src/lib/date.js","webpack:///./src/components/Meta.jsx","webpack:///./src/graphql/query/user.js","webpack:///./src/components/Scroll.jsx","webpack:///./src/lib/fetch.js","webpack:///./src/components/List.jsx","webpack:///./src/components/Carousel.jsx","webpack:///./src/components/UserCardTypeItem.jsx","webpack:///./src/pages/feed/index.jsx","webpack:///./src/graphql/query/post.js"],"names":["CommonQuery","children","props","loading","error","data","fetchMore","client","PostLike","id","likers","isShowCount","dispatch","useDispatch","userId","useSelector","useMutation","LIKE_POST","like","UNLIKE_POST","unlike","useState","isLike","setIsLike","length","likeCount","setLikeCount","handleClick","useCallback","a","getStorage","TOKEN_KEY","type","SHOW_LOGIN_MODAL","variables","willIsLike","willLikeCount","graphqlError","useEffect","some","liker","className","onClick","aria-label","tabIndex","toLocaleString","PostItem","User","createdAt","category","content","Likers","mdBodyEl","useRef","setLoading","imgs","current","querySelectorAll","forEach","img","idx","obj","Image","src","onload","width","this","height","wrapper","parentNode","classList","add","style","paddingBottom","Avatar","avatar","size","nickname","color","visible","ref","dangerouslySetInnerHTML","__html","marked","to","value","today","Date","timeValue","betweenTime","Math","floor","getTime","betweenTimeHour","betweenTimeDay","betweenTimeWeek","betweenTimeMonth","timeForToday","memo","Meta","title","description","name","gql","GET_RECOMMENDERS","GET_USER","Scroll","onBottom","$main","document","querySelector","scrollHeight","clientHeight","scrollTop","disabledEvent","activeEvent","addEventListener","handleScroll","removeEventListener","Component","handleFetchMore","callback","updateQuery","prev","next","fetchMoreResult","rows","count","List","query","fetchMoreType","Item","Query","len","map","row","key","offset","PrevArrow","NextArrow","Carousel","settings","infinite","speed","slidesToShow","centerMode","prevArrow","nextArrow","autoplay","autoplaySpeed","UserCardTypeItem","PostCount","Feed","limit","recommenders","user","GET_POSTS","order"],"mappings":"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","file":"static/js/pages-feed.aec6baa7.chunk.js","sourcesContent":["import React from \"react\";\nimport { Query } from \"@apollo/react-components\";\nimport Loader from \"./Loader\";\n\n/**\n * * 공통 요청 쿼리 컴포넌트\n *\n * @Component\n * @author firsk\n */\nconst CommonQuery = ({ children, ...props }) => {\n    return (\n        <Query {...props}>\n            {({ loading, error, data, fetchMore, client }) => {\n                if (error) {\n                    return `Error!: ${error}`;\n                }\n\n                if (!data) {\n                    return <Loader />;\n                }\n\n                return children({\n                    data,\n                    loading,\n                    fetchMore,\n                    client\n                });\n            }}\n        </Query>\n    );\n};\n\nexport default CommonQuery;\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport { HeartFull, HeartEmpty } from \"../assets/icon\";\nimport { LIKE_POST, UNLIKE_POST } from \"../graphql/mutation/post\";\nimport { graphqlError } from \"../lib/error\";\nimport { useDispatch, useSelector } from \"../context\";\nimport { getStorage, TOKEN_KEY } from \"../lib/cookie\";\nimport { SHOW_LOGIN_MODAL } from \"../context/action\";\n\n/**\n * 좋아요 버튼 컴포넌트\n *\n * @param {string}   props.id          게시물 ID\n * @param {object[]} props.likers      좋아요 누른 명단\n * @param {object[]} props.isShowCount 좋아요 수 보여줄 지 여부\n * @deprecated {object}   props.style       아이콘 스타일\n */\nconst PostLike = ({ id, likers, isShowCount }) => {\n    const dispatch = useDispatch();\n\n    const { id: userId } = useSelector();\n    // 좋아요 mutation\n    const [like] = useMutation(LIKE_POST);\n    // 좋아요 취소 mutation\n    const [unlike] = useMutation(UNLIKE_POST);\n    // 좋아요 여부 상태\n    const [isLike, setIsLike] = useState(false);\n    // 좋아요 수 상태, -1: 비활성화\n    const [likeCount, setLikeCount] = useState(likers.length);\n    // 클릭 핸들러\n    const handleClick = useCallback(async () => {\n        // 로그인 체크\n        const token = getStorage(TOKEN_KEY);\n\n        if (token === null) {\n            return dispatch({\n                type: SHOW_LOGIN_MODAL\n            });\n        }\n\n        try {\n            let willIsLike;\n            let willLikeCount;\n\n            if (isLike) {\n                await unlike({\n                    variables: { id }\n                });\n                willIsLike = false;\n\n                willLikeCount = likeCount - 1;\n            } else {\n                await like({\n                    variables: { id }\n                });\n\n                willIsLike = true;\n\n                willLikeCount = likeCount + 1;\n            }\n            // 좋아요 여부 업데이트\n            setIsLike(willIsLike);\n            // 좋아요 수 업데이트\n            setLikeCount(willLikeCount);\n        } catch (error) {\n            graphqlError({ error, dispatch });\n        }\n    }, [isLike, likeCount]);\n\n    useEffect(() => {\n        setIsLike(likers.some((liker) => liker.id == userId));\n    }, [userId]);\n\n    return (\n        <div className=\"fr-like\">\n            <button onClick={handleClick} aria-label=\"좋아요\">\n                <span tabIndex=\"-1\">\n                    {isLike ? <HeartFull /> : <HeartEmpty />}\n                </span>\n\n                <span className=\"a11y-hidden\">\n                    {isLike ? \"좋아요 취소하기\" : \"좋아요 하기\"}\n                </span>\n            </button>\n            <div className=\"fr-like__count\">\n                {isShowCount && <span>{likeCount.toLocaleString()}</span>}\n            </div>\n        </div>\n    );\n};\n\nexport default PostLike;\n","import React, { useEffect, useRef, useState, memo } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Avatar from \"./Avatar\";\nimport { timeForToday } from \"../lib/date\";\nimport PostLike from \"./PostLike\";\nimport { marked } from \"marked\";\nimport Spinner from \"react-loader-spinner\";\n// import { DropdownBtn } from \"./Dropdown\";\n// import { useSelector } from \"../context\";\n\n/**\n * 게시물 컴포넌트\n *\n * @param {string} props.id           게시물 ID\n * @param {string} props.title        게시물 제목\n * @param {string} props.description  게시물 설명\n * @param {object} props.User         게시물 작성자\n * @param {string} props.createdAt    게시물 작성일\n * @param {number} props.viewCount    게시물 조회수\n * @param {string} props.category     게시물 카테고리\n * @param {string} props.thumbnail    게시물 썸네일\n * @param {string} props.Likers       게시물 좋아요 목록\n * @param {string} props.PostComments 게시물 댓글\n */\nconst PostItem = ({ id, User, createdAt, category, content, Likers }) => {\n    const displayName = \"fr-post\";\n\n    // const { id: userId } = useSelector();\n\n    const mdBodyEl = useRef(null);\n    // 이미지 로딩 여부\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const imgs = mdBodyEl.current.querySelectorAll(\"img\");\n        // 이미지가 없는 게시물인 경우\n        if (imgs.length === 0) {\n            setLoading(false);\n        }\n        // 이미지 리사이징\n        imgs.forEach((img, idx) => {\n            const obj = new Image();\n\n            obj.src = img.src;\n\n            obj.onload = function () {\n                const width = this.width;\n\n                const height = this.height;\n\n                const wrapper = img.parentNode;\n\n                wrapper.classList.add(\"fr-thumbnail\");\n\n                wrapper.style.paddingBottom = `calc(${height / width} * 100%)`;\n\n                img.classList.add(\"fr-thumbnail__image\");\n\n                if (idx === imgs.length - 1) {\n                    setLoading(false);\n                }\n            };\n        });\n    }, []);\n\n    return (\n        <div className={`${displayName}__wrapper`}>\n            <article className={displayName}>\n                <header className={`${displayName}__header`}>\n                    <div\n                        className={`${displayName}__avatar`}\n                        aria-label=\"avatar\"\n                    >\n                        <Avatar src={User.avatar} size={38} userId={User.id} />\n                    </div>\n                    <div className={`${displayName}__user`}>\n                        <span className={`${displayName}__username`}>\n                            {User.nickname}\n                        </span>\n                    </div>\n                    {/* {userId == User.id && <DropdownBtn />} */}\n                </header>\n                <div\n                    className={`${displayName}__body ${displayName}__body--expended`}\n                >\n                    {loading && (\n                        <div className={`${displayName}__skeleton`}>\n                            <Spinner\n                                type=\"ThreeDots\"\n                                color=\"#4142DD\"\n                                height={80}\n                                width={80}\n                                visible={true}\n                            />\n                        </div>\n                    )}\n\n                    <div\n                        ref={mdBodyEl}\n                        className=\"markdown-body\"\n                        dangerouslySetInnerHTML={{\n                            __html: content ? marked(content) : \"\"\n                        }}\n                    />\n                    {/* {!expension && (\n                        <div className={`${displayName}__expansion`}>\n                            <button onClick={handleClick}>더보기</button>\n                        </div>\n                    )} */}\n                </div>\n                <footer className={`${displayName}__footer`}>\n                    {category && (\n                        <div className={`${displayName}__tag`}>\n                            <Link to={`/category/${category}`}>\n                                #{category}\n                            </Link>\n                        </div>\n                    )}\n\n                    <div className={`${displayName}__more`}>\n                        <div>\n                            <PostLike\n                                id={id}\n                                likers={Likers}\n                                isShowCount={true}\n                            />\n                        </div>\n                        <div>{timeForToday(createdAt)}</div>\n                    </div>\n                </footer>\n            </article>\n        </div>\n    );\n};\n\nexport default memo(PostItem);\n","/**\n * Date => Str\n *\n * @param {Date} value\n */\nexport const timeForToday = (value) => {\n    const today = new Date();\n    const timeValue = new Date(value);\n\n    const betweenTime = Math.floor(\n        (today.getTime() - timeValue.getTime()) / 1000 / 60\n    );\n    if (betweenTime < 1) return \"방금 전\";\n    if (betweenTime < 60) {\n        return `${betweenTime}분 전`;\n    }\n\n    const betweenTimeHour = Math.floor(betweenTime / 60);\n    if (betweenTimeHour < 24) {\n        return `${betweenTimeHour}시간 전`;\n    }\n\n    const betweenTimeDay = Math.floor(betweenTime / 60 / 24);\n    if (betweenTimeDay < 31) {\n        return `${betweenTimeDay}일 전`;\n    }\n\n    const betweenTimeWeek = Math.floor(betweenTime / 60 / 24 / 7);\n    if (betweenTimeWeek < 5) {\n        return `${betweenTimeWeek}주 전`;\n    }\n\n    const betweenTimeMonth = Math.floor(betweenTime / 60 / 24 / 7 / 12);\n    if (betweenTimeMonth < 13) {\n        return `${betweenTimeMonth}개월 전`;\n    }\n\n    return `${Math.floor(betweenTimeDay / 365)}년 전`;\n};\n","import React from \"react\";\nimport { Helmet } from \"react-helmet\";\n\n/**\n * * 검색엔진 최적화를 위한 메타 컴포넌트\n *\n * @Component\n * @author frisk\n * @param props.title Head title\n */\nconst Meta = ({ title, description }) => (\n    <Helmet>\n        <title>{title || \"Frisklog\"}</title>\n        <meta\n            name=\"description\"\n            content={description || \"Blog made by frisk\"}\n        />\n        <meta name=\"twitter:title\" content={title || \"Frisklog\"} />\n        <meta\n            name=\"twitter:description\"\n            content={description || \"Blog made by frisk\"}\n        />\n        <meta name=\"twitter:image:alt\" content=\"frisklog\" />\n    </Helmet>\n);\n\nexport default Meta;\n","import { gql } from \"@apollo/client\";\n\n/**\n * 사용자 검색\n *\n * @param $offset 건너뛸 목록의 수\n * @param $limit  요청 목록의 수\n * @param $order  정렬\n */\nexport const GET_USERS = gql`\n    query GetUsers($offset: Int, $limit: Int!, $order: String) {\n        users(offset: $offset, limit: $limit, order: $order) {\n            rows {\n                id\n                nickname\n                email\n                avatar\n                isMaster\n                Posts {\n                    id\n                }\n                createdAt\n                updatedAt\n            }\n            count\n        }\n    }\n`;\n\n/**\n * 추천인 검색\n *\n * @param $offset 건너뛸 목록의 수\n * @param $limit  요청 목록의 수\n * @param $order  정렬\n */\nexport const GET_RECOMMENDERS = gql`\n    query GetRecommenders($offset: Int, $limit: Int!) {\n        recommenders(offset: $offset, limit: $limit) {\n            id\n            nickname\n            avatar\n            PostCount\n        }\n    }\n`;\n\n/**\n * 사용자 상세 조회\n *\n * @param $id 사용자 ID\n */\nexport const GET_USER = gql`\n    query GetUser($id: String!) {\n        user(id: $id) {\n            id\n            nickname\n            email\n            avatar\n            isMaster\n            Posts {\n                id\n            }\n            createdAt\n            updatedAt\n        }\n    }\n`;\n\n/**\n * 내 정보\n *\n * @query\n * @author frisk\n */\nexport const ME = gql`\n    query Me {\n        me {\n            id\n            nickname\n            email\n            avatar\n            isMaster\n            Posts {\n                id\n            }\n            createdAt\n            updatedAt\n        }\n    }\n`;\n","import { Component } from \"react\";\n\n/**\n * 스크롤 이벤트 컴포넌트\n *\n * @param {function} props.onBottom  조건부 실행 함수\n */\nclass Scroll extends Component {\n    handleScroll = () => {\n        const { onBottom } = this.props;\n\n        const $main = document.querySelector(\"#main\");\n\n        const { scrollHeight, clientHeight, scrollTop } = $main;\n\n        if (scrollTop + clientHeight > scrollHeight - 600) {\n            this.disabledEvent();\n\n            onBottom(this.activeEvent);\n        }\n    };\n\n    activeEvent = () => {\n        const $main = document.querySelector(\"#main\");\n\n        $main.addEventListener(\"scroll\", this.handleScroll);\n    };\n\n    disabledEvent = () => {\n        const $main = document.querySelector(\"#main\");\n\n        $main.removeEventListener(\"scroll\", this.handleScroll);\n    };\n\n    componentDidMount() {\n        this.activeEvent();\n    }\n\n    componentWillUnmount() {\n        this.disabledEvent();\n    }\n\n    render() {\n        return null;\n    }\n}\n\nexport default Scroll;\n","/**\n * Custom fetch more\n *\n * @param  {function}               fetchMore\n * @param  {object}                 variables\n * @param  {string}                 type\n * @return {(function) => function}\n */\nexport const handleFetchMore = ({ fetchMore, variables, type }) => (callback) =>\n    fetchMore({\n        variables,\n        updateQuery: (prev, next) => {\n            const { fetchMoreResult } = next;\n\n            if (!fetchMoreResult || fetchMoreResult[type].rows.length === 0) {\n                return prev;\n            }\n\n            callback();\n\n            return {\n                [type]: {\n                    rows: [...prev[type].rows, ...fetchMoreResult[type].rows],\n                    count: prev[type].count\n                }\n            };\n        }\n    });\n","import React from \"react\";\nimport Query from \"./Query\";\nimport Scroll from \"./Scroll\";\nimport { handleFetchMore } from \"../lib/fetch\";\n\n/**\n * 공통 리스트 렌더링 컴포넌트\n *\n * @param {string}          type          데이터 키\n * @param {string}          query         요청 쿼리\n * @param {object}          variables     요청 쿼리 파라미터\n * @param {string}          fetchMoreType @enum scroll | button\n * @param {React.Component} Item          렌더링 컴포넌트\n */\nconst List = ({ type, query, variables, fetchMoreType, Item }) => (\n    <Query query={query} variables={variables}>\n        {({ data, fetchMore }) => {\n            const { rows, count } = data[type];\n\n            const len = rows.length;\n\n            if (len === 0) {\n                return \"no data\";\n            }\n\n            return (\n                <>\n                    {rows.map((row) => (\n                        <Item key={type + row.id} {...row} />\n                    ))}\n\n                    {len < count &&\n                        ((fetchMoreType === \"scroll\" && (\n                            <Scroll\n                                onBottom={handleFetchMore({\n                                    fetchMore,\n                                    variables: {\n                                        ...variables,\n                                        offset: len\n                                    },\n                                    type\n                                })}\n                            />\n                        )) ||\n                            (fetchMoreType === \"button\" && null))}\n                </>\n            );\n        }}\n    </Query>\n);\n\nexport default List;\n","import React from \"react\";\nimport Slider from \"react-slick\";\nimport { useSelector } from \"../context\";\nimport { Arrow } from \"../assets/icon\";\n\nconst PrevArrow = ({ onClick }) => {\n    return (\n        <button className=\"fr-carousel__prev\" onClick={onClick}>\n            <Arrow />\n        </button>\n    );\n};\n\nconst NextArrow = ({ onClick }) => {\n    return (\n        <button className=\"fr-carousel__next\" onClick={onClick}>\n            <Arrow />\n        </button>\n    );\n};\n/**\n * 공통 버튼 컴포넌트\n *\n */\nconst Carousel = ({ children }) => {\n    const { slidesToShow } = useSelector();\n\n    const settings = {\n        className: \"fr-carousel\",\n        infinite: true,\n        speed: 500,\n        slidesToShow,\n        centerMode: true,\n        prevArrow: <PrevArrow />,\n        nextArrow: <NextArrow />,\n        autoplay: true,\n        autoplaySpeed: 5000\n    };\n\n    return <Slider {...settings}>{children}</Slider>;\n};\n\nexport default Carousel;\n","import React from \"react\";\nimport Avatar from \"./Avatar\";\n\n/**\n * 사용자 카드형 컴포넌트\n *\n * @param {string} props.userId  사용자 ID\n * @param {number} props.size    프로필 사진 크기\n * @param {string} props.src     이미지 자원\n */\nconst UserCardTypeItem = ({ id, nickname, avatar, PostCount }) => {\n    const displayName = \"fr-usercard\";\n\n    return (\n        <div className={displayName}>\n            <div className={`${displayName}__header`}>\n                <span className=\"fr-avatar__name\">{nickname}</span>\n                <span>{PostCount} Posts</span>\n            </div>\n            <div className={`${displayName}__body`}>\n                <Avatar userId={id} size={120} src={avatar} />\n            </div>\n        </div>\n    );\n};\n\nexport default UserCardTypeItem;\n","import React from \"react\";\nimport Meta from \"../../components/Meta\";\nimport Query from \"../../components/Query\";\nimport { GET_RECOMMENDERS } from \"../../graphql/query/user\";\nimport { GET_POSTS } from \"../../graphql/query/post\";\nimport PostItem from \"../../components/PostItem\";\nimport Carousel from \"../../components/Carousel\";\nimport UserCardTypeItem from \"../../components/UserCardTypeItem\";\nimport List from \"../../components/List\";\n\n/**\n * 메인 화면 컴포넌트\n *\n */\nconst Feed = () => (\n    <>\n        <Meta />\n        <Query\n            query={GET_RECOMMENDERS}\n            variables={{\n                limit: 10\n            }}\n        >\n            {({ data: { recommenders } }) => {\n                if (recommenders.length === 0) {\n                    return null;\n                }\n\n                return (\n                    <>\n                        <div className=\"fr-main__title\">\n                            <span>추천인</span>\n                        </div>\n                        <Carousel>\n                            {recommenders.map((user) => (\n                                <UserCardTypeItem\n                                    key={`user${user.id}`}\n                                    {...user}\n                                />\n                            ))}\n                        </Carousel>\n                        <br />\n                    </>\n                );\n            }}\n        </Query>\n\n        <div className=\"fr-main__title activeEscape\">\n            <span>최근 게시물</span>\n        </div>\n        <List\n            type=\"posts\"\n            query={GET_POSTS}\n            variables={{\n                limit: 12,\n                order: \"createdAt_DESC\"\n            }}\n            fetchMoreType=\"scroll\"\n            Item={PostItem}\n        />\n    </>\n);\n\nexport default Feed;\n","import { gql } from \"@apollo/client\";\n\n/**\n * 게시물 검색\n *\n * @param $offset         건너뛸 목록의 수\n * @param $limit          요청 목록의 수\n * @param $order          정렬\n * @param $searchKeyword  검색어\n * @param $category       카테고리\n * @param $userId         사용자 ID\n * @deprecated $isThereThumb   썸네일 있는지 여부\n */\nexport const GET_POSTS = gql`\n    query GetPosts(\n        $offset: Int\n        $limit: Int!\n        $order: String\n        $searchKeyword: String\n        $category: String\n        $userId: String\n    ) # $isThereThumb: Boolean\n    {\n        posts(\n            offset: $offset\n            limit: $limit\n            order: $order\n            searchKeyword: $searchKeyword\n            category: $category\n            userId: $userId\n        ) # isThereThumb: $isThereThumb\n        {\n            rows {\n                id\n                # title\n                # description\n                content\n                # viewCount\n                category\n                # thumbnail\n                User {\n                    id\n                    nickname\n                    avatar\n                }\n                Likers {\n                    id\n                }\n                createdAt\n                updatedAt\n            }\n            count\n        }\n    }\n`;\n\n/**\n * 게시물 상세 로드\n *\n * @param $id 건너뛸 목록의 수\n */\nexport const GET_POST = gql`\n    query GetPost($id: String!) {\n        post(id: $id) {\n            id\n            # title\n            # description\n            content\n            # viewCount\n            category\n            # thumbnail\n            User {\n                id\n                nickname\n                avatar\n            }\n            Likers {\n                id\n            }\n            createdAt\n            updatedAt\n        }\n    }\n`;\n"],"sourceRoot":""}